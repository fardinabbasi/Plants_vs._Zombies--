{"date":"2024-05-13T19:13:41.772Z","courseId":"17","assignment":"AP-Spring03-CA5","trace":{"version":29,"content":"#include \"Sun.hpp\"\n\nSun::Sun(map<string, int> config, const FloatRect bg_bound):\nconfig(config), bg_bound(bg_bound)\n{\n    if(config.contains(\"StartingNum\"))\n        budget = config[\"StartingNum\"];\n    else\n        budget = 0;\n    if (!sun_tex.loadFromFile(IMAGES_PATH + \"Sun.png\")) {\n        cerr << FILE_FAILED_MESSAGE << endl;\n    }\n    if (!font.loadFromFile(FONTS_PATH + \"score.ttf\")) {\n        cerr << FILE_FAILED_MESSAGE << endl;\n    }\n\n    IntRect subrect(0, 0, 350, 325);\n    deck_sp.setTexture(sun_tex);\n    deck_sp.setTextureRect(subrect);\n    deck_sp.setPosition(bg_bound.left+70, bg_bound.top+30);\n    deck_sp.setScale(0.25, 0.25);\n    \n    deck_txt.setFont(font);\n    deck_txt.setString(to_string(budget));\n    deck_txt.setFillColor(Color::Black);\n    deck_txt.setPosition(Vector2f(bg_bound.left+170, bg_bound.top+50));\n\n    clock.restart();\n}\n\nvoid Sun::render(RenderWindow &window){\n    update();\n    window.draw(deck_sp);\n    for (auto&sun:suns){\n        window.draw(sun);\n    }\n    window.draw(deck_txt);\n}\n\nvoid Sun::update(){\n    unsigned int speed = config[\"Speed\"];\n    for_each(suns.begin(), suns.end(), [speed](Sprite& sun){ sun.move(0, speed); });\n    if (suns.front().getPosition().y >= bg_bound.height)\n        suns.pop_front();\n\n    if(clock.getElapsedTime().asSeconds() >= config[\"Interval\"]){\n        clock.restart();\n        random_device rd;\n        mt19937 gen(rd());\n        uniform_int_distribution<int> dis(260, 980);\n        Sprite new_sun = deck_sp;\n        new_sun.setPosition(Vector2f(dis(gen), 0));\n        suns.push_back(new_sun);\n    }\n    deck_txt.setString(to_string(budget));\n}\n\nbool Sun::mouse_press(int x, int y){\n    auto it = suns.begin();\n    while(it != suns.end()){\n        if (it->getGlobalBounds().contains(Vector2f(x,y))){\n            budget++;\n            it = suns.erase(it);\n            return true;\n        }\n        else\n            ++it;\n    }\n}","filename":"/media/sf_AP/HW/HW5/Plants_vs._Zombies--/src/Sun.cpp","identifier":"Text Change","lineCount":69,"languageId":"cpp"},"failed":false}