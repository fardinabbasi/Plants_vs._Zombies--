{"date":"2024-05-13T20:19:12.159Z","courseId":"17","assignment":"AP-Spring03-CA5","trace":{"version":22,"content":"#include \"BaseZombie.hpp\"\n\nBaseZombie::BaseZombie(map<string, int> config, string tex_path, FloatRect bg_bound):\nconfig(config), bg_bound(bg_bound)\n{   \n    plant = nullptr; \n    if (!texture.loadFromFile(IMAGES_PATH + tex_path)) {\n        cerr << FILE_FAILED_MESSAGE << endl;\n    }\n    sprite.setTexture(texture);\n    sprite.setOrigin((sf::Vector2f)texture.getSize() / 2.f);\n\n    random_device rd;\n    mt19937 gen(rd());\n    uniform_int_distribution<int> dis1(0, HEIGHT_GRIDS.size());\n    uniform_int_distribution<int> dis2(0, 300);\n    sprite.setPosition(bg_bound.left+bg_bound.width-dis2(gen), HEIGHT_GRIDS[dis1(gen)]);\n    hit.restart();\n\n}\n\nvoid BaseZombie::update(){\n    float speed;\n    if(cool_penalty.getElapsedTime().asSeconds() >= COOL_TIME)\n        speed = config[\"Speed\"];\n    else\n        speed = config[\"Speed\"]/2;\n\n    if (plant == nullptr)\n        sprite.move(Vector2f(-speed, 0));\n    else if(hit.getElapsedTime().asSeconds() >= config[\"HitRate\"]){\n            plant->hurt(config[\"Damage\"]);\n            plant = plant->dead()? nullptr: plant;\n            hit.restart();\n    }\n}\n\nvoid BaseZombie::set_target(Plant* p){\n    if(plant == nullptr && sprite.getGlobalBounds().intersects(p->getGlobalBounds()))\n        plant = p;\n}\n\nvoid BaseZombie::hurt(unsigned int damage, bool cool){\n    health -= damage;\n    if(cool){\n        cool_penalty.restart();\n    }\n}\n\nbool BaseZombie::dead(){\n    return health <= 0;\n}\n\nbool BaseZombie::win(){\n    return sprite.getGlobalBounds().left <= (WIDTH_GRIDS.front() - 5);\n}\n\nfloat BaseZombie::get_height(){\n    return sprite.getGlobalBounds().top;\n}\n\nfloat BaseZombie::get_width(){\n    return sprite.getGlobalBounds().left;\n}\n\nvoid BaseZombie::render(RenderWindow &window){\n    update();\n    window.draw(sprite);\n}","filename":"/media/sf_AP/HW/HW5/Plants_vs._Zombies--/src/BaseZombie.cpp","identifier":"Text Change","lineCount":69,"languageId":"cpp"},"failed":false}